<p id="notice"><%= notice %></p>

<h1><%= I18n.t('activerecord.models.sale.other') %></h1>

<%= link_to 'Importar vendas', import_sales_path, method: :get %>

<table>
  <thead>
    <tr>
      <th><%= I18n.t('activerecord.attributes.sale.purchaser_id') %></th>
      <th><%= I18n.t('activerecord.attributes.product.description') %></th>
      <th><%= I18n.t('activerecord.attributes.product.price_cents') %></th>
      <th><%= I18n.t('activerecord.attributes.sale.quantity') %></th>
      <th><%= I18n.t('activerecord.attributes.sale.address_id') %></th>
      <th><%= I18n.t('activerecord.attributes.sale.provider_id') %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% total = 0 %>
    <% @sales.each do |sale| %>
      <tr>
        <td><%= sale.purchaser.name %></td>
        <td><%= sale.product.description %></td>
        <td><%= sale.product.price %></td>
        <td><%= sale.quantity %></td>
        <td><%= sale.provider.address.street  %></td>
        <td><%= sale.provider.name  %></td>
        <td><%= link_to 'Visualizar', sale %></td>
        <% total += sale.product.price %>
      </tr>
    <% end %>
    <tr>
      <td> Total: </td>
      <td><%= total %> </td>
    </tr>
  </tbody>
</table>

